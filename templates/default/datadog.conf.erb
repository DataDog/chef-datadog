# Generated by Chef, local modifications will be overwritten

[Main]
dd_url: <%= @dd_url %>
api_key: <%= @api_key %>
debug_mode: <%= node['datadog']['debug'] %>
check_freq: <%= node['datadog']['check_freq'] %>
hostname: <%= node.name %>
use_mount: <%= node['datadog']['use_mount'] ? "yes" : "no"  %>
listen_port: <%= node['datadog']['agent_port'] %>
tags: <%= node['datadog']['tags'] %>

<% if !node['datadog']['dogstreams'].empty? -%>
dogstreams: <%= node['datadog']['dogstreams'].join(', ') %>
<% end -%>

<% if node['datadog']['graphite'] -%>
graphite_listen_port: <%= node['datadog']['graphite_port'] %>
<% end -%>

<% if node['datadog']['dogstatsd'] -%>
# ========================================================================== #
# DogStatsd configuration                                                    #
# ========================================================================== #

# DogStatsd is a small server that aggregates your custom app metrics. For
# usage information, check out http://docs.datadoghq.com

#  Make sure your client is sending to the same port.
dogstatsd_port : <%= node['datadog']['dogstatsd_port'] %>

## The dogstatsd flush period.
dogstatsd_interval : <%= node['datadog']['dogstatsd_interval'] %>
<% end -%>

# ========================================================================== #
# Logging
# ========================================================================== #

log_level: INFO

# collector_log_file: /var/log/datadog/collector.log
# forwarder_log_file: /var/log/datadog/forwarder.log
# dogstatsd_log_file: /var/log/datadog/dogstatsd.log
# pup_log_file:       /var/log/datadog/pup.log

# if syslog is enabled but a host and port are not set, a local domain socket
# connection will be attempted
#
log_to_syslog: <%= node['datadog']['syslog']['active'] ? 'yes' : 'no' %>
<% if node['datadog']['syslog']['udp'] -%>
syslog_host: <%= node['datadog']['syslog']['host'] %>
syslog_port: <%= node['datadog']['syslog']['port'] %>
<% end -%>
