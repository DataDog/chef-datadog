init_config:
# To notify on every service, set a list of notified uses here.
#
#    notify:
#        - user1@example.com
#        - pagerduty

instances:
  <% @instances.each do |i| -%>
  - name: <%= i['name'] %>
    url: <%= i['url'] %>
    <% if i.key?('timeout') -%>
    timeout: <%= i['timeout'] %>
    <% end -%>
    <% if i.key?('username') && i.key?('password') -%>
    username: <%= i['username'] %>
    password: <%= i['password'] %>
    <% end -%>
    <% if i.key?('threshold') -%>
    threshold: <%= i['threshold'] %>
    <% end -%>
    <% if i.key?('window') -%>
    window: <%= i['window'] %>
    <% end -%>
    <% if i.key?('notify') -%>
    notify:
      <% i['notify'].each do |k| -%>
      - <%= k %>
      <% end -%>
    <% end -%>

  <% end -%>
